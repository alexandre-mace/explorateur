{"version":3,"file":"static/js/212.d2e2848d.chunk.js","mappings":"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","sources":["data/adapter/getElectricityProductionBySource.js","components/charts/ElectricityProductionBySource.js"],"sourcesContent":["import data from \"../dataset/electricity/electricity-production-by-source.json\";\r\nimport countries from \"i18n-iso-countries\";\r\ncountries.registerLocale(require(\"i18n-iso-countries/langs/en.json\"));\r\ncountries.registerLocale(require(\"i18n-iso-countries/langs/fr.json\"));\r\n\r\nconst getElectricityProductionBySource = (country, year) => {\r\n    let chartCountries = Array.from(\r\n        new Set(\r\n            (data\r\n                .filter(datum => typeof countries.getName(datum.Code, \"fr\", {select: \"official\"}) !== 'undefined')\r\n                .map(datum => countries.getName(datum.Code, \"fr\", {select: \"official\"}))\r\n            )\r\n        )\r\n    )\r\n    chartCountries.unshift('Monde')\r\n\r\n    if (country && year) {\r\n        const countryData = data.filter(datum =>\r\n            (\r\n                (countries.getName(datum.Code, \"fr\", {select: \"official\"}) === country) ||\r\n                ((country === 'Monde' && datum.Code === 'WORLD') || (country === 'Monde' && datum.Code === 'OWID_WRL'))\r\n            )\r\n        )\r\n\r\n        let chartData = []\r\n\r\n        countryData.filter(datum => parseInt(datum.Year) === parseInt(year)).sort((a, b) => parseInt(a.Year) - parseInt(b.Year)).forEach(countryDatum => {\r\n            Object.keys(countryDatum).filter(key => key.includes('TWh')).forEach(key => {\r\n                chartData.push({\r\n                    name: convertLabels(key),\r\n                    y: countryDatum[key]\r\n                })\r\n            })\r\n        })\r\n\r\n        return {\r\n            countries: chartCountries,\r\n            data: chartData,\r\n            years: countryData.sort((a, b) => parseInt(a.Year) - parseInt(b.Year)).map(datum => datum.Year).reverse()\r\n        }\r\n    }\r\n\r\n    if (country) {\r\n        const countryData = data.filter(datum =>\r\n            (\r\n                ((countries.getName(datum.Code, \"fr\", {select: \"official\"}) === country) ||\r\n                ((country === 'Monde' && datum.Code === 'WORLD') || (country === 'Monde' && datum.Code === 'OWID_WRL')))\r\n            )\r\n        )\r\n\r\n        const years = countryData.sort((a, b) => parseInt(a.Year) - parseInt(b.Year)).map(datum => datum.Year)\r\n        let chartData = []\r\n\r\n        countryData.forEach(countryDatum => {\r\n            Object.keys(countryDatum).filter(key => key.includes('TWh')).forEach(key => {\r\n                if (!chartData.find(datum => convertLabels(datum.name) === convertLabels(key))) {\r\n                    chartData.push({\r\n                        name: convertLabels(key),\r\n                        data: []\r\n                    })\r\n                }\r\n\r\n                chartData\r\n                    .find(datum => convertLabels(datum.name) === convertLabels(key))\r\n                    .data.push((isNaN(parseFloat(countryDatum[key])) ? 0 : parseFloat(countryDatum[key])))\r\n            })\r\n        })\r\n\r\n        return {\r\n            countries: chartCountries,\r\n            years: years,\r\n            data: chartData\r\n        }\r\n    }\r\n}\r\n\r\nconst convertLabels = (label) => {\r\n    let convertedLabel = label.replace('Electricity from ', '').replace(' (TWh)', '')\r\n    return  convertedLabel.charAt(0).toUpperCase() + convertedLabel.slice(1);\r\n}\r\n\r\nexport default getElectricityProductionBySource","import React  from 'react';\r\nimport Highcharts from 'highcharts';\r\nimport HighchartsReact from 'highcharts-react-official';\r\nimport highcharts3d from \"highcharts/highcharts-3d\";\r\nimport FormControl from '@mui/material/FormControl';\r\nimport {Autocomplete, TextField} from \"@mui/material\";\r\nimport useWindowDimensions from \"../../utils/useWindowDimensions\";\r\nimport {getOptions} from \"../../options/chartOptions\";\r\nimport seriesLabel from 'highcharts/modules/series-label';\r\nimport ChartLoader from \"../ChartLoader\";\r\nimport handleCountryChange from \"../../utils/handleCountryChange\";\r\nimport handleYearChange from \"../../utils/handleYearChange\";\r\nimport ChartTypes from \"../ChartTypes\";\r\nimport sortToLowest from \"../../utils/sortToLowest\";\r\nimport ChartTitle from \"../ChartTitle\";\r\nimport ChartSources from \"../ChartSources\";\r\nimport getElectricityProductionBySource from \"../../data/adapter/getElectricityProductionBySource\";\r\n\r\nseriesLabel(Highcharts);\r\nhighcharts3d(Highcharts);\r\n\r\nconst ElectricityProductionBySource = (props) => {\r\n    const [dataset, setDataset] = React.useState(null)\r\n    const [year, setYear] = React.useState('2020')\r\n    const [country, setCountry] = React.useState('Monde')\r\n    const [chart, setChart] = React.useState('area')\r\n    const {width} = useWindowDimensions();\r\n\r\n    React.useLayoutEffect(() => {\r\n        setDataset(getElectricityProductionBySource(country, year))\r\n    }, [])\r\n\r\n    React.useEffect(() => {\r\n        setDataset(getElectricityProductionBySource(country, (chart !== 'pie' ? null : year)))\r\n    }, [year, country, chart])\r\n\r\n    console.log(dataset)\r\n    return (\r\n        <>\r\n            {dataset === null &&\r\n                <ChartLoader/>\r\n            }\r\n\r\n            {dataset !== null &&\r\n                <>\r\n                    <div className=\"row pb-4 pt-2 justify-content-between\">\r\n                        <div className=\"col-auto chart-related-settings\">\r\n                            <FormControl sx={{ minWidth: 200, maxWidth: 400, marginRight: 1 }}>\r\n                                <Autocomplete\r\n                                    disableClearable\r\n                                    disablePortal\r\n                                    id=\"country-box\"\r\n                                    options={dataset.countries}\r\n                                    color={\"primary\"}\r\n                                    value={country}\r\n                                    onChange={(value) => handleCountryChange(value, setCountry)}\r\n                                    sx={{ width: 250 }}\r\n                                    renderInput={(params) => <TextField {...params} label={\"Pays\"} />}\r\n                                />\r\n                            </FormControl>\r\n                            {chart !== 'area' &&\r\n                                <FormControl sx={{ minWidth: 200, maxWidth: 400, marginLeft: 1 }}>\r\n                                    <Autocomplete\r\n                                        disableClearable\r\n                                        disablePortal\r\n                                        id=\"year-box\"\r\n                                        options={dataset.years}\r\n                                        value={year}\r\n                                        onChange={(value) => handleYearChange(value, setYear)}\r\n                                        sx={{ width: 250 }}\r\n                                        renderInput={(params) => <TextField {...params} label={\"Année\"} />}\r\n                                    />\r\n                                </FormControl>\r\n                            }\r\n                        </div>\r\n                        <div className=\"col-auto\">\r\n                            <ChartTypes chart={chart} setChart={setChart} chartTypes={['pie', 'area']}/>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"row\">\r\n                        <div className=\"col\">\r\n                            {chart === 'pie' &&\r\n                                <HighchartsReact\r\n                                    highcharts={Highcharts}\r\n                                    options={{...(getOptions(chart, width)), ...{series: [{\r\n                                                type: chart,\r\n                                                data: dataset.data\r\n                                            }]}}}\r\n                                    {...props}\r\n                                />\r\n                            }\r\n                            {chart === 'area' &&\r\n                                <HighchartsReact\r\n                                    highcharts={Highcharts}\r\n                                    options={{\r\n                                        ...(getOptions(chart, width)),\r\n                                        ...{\r\n                                            xAxis: {\r\n                                                categories: [...dataset.years],\r\n                                                tickmarkPlacement: 'on',\r\n                                                title: {\r\n                                                    enabled: false\r\n                                                }\r\n                                            },\r\n                                            yAxis: {\r\n                                                title: {\r\n                                                    text: 'Twh'\r\n                                                },\r\n                                            },\r\n                                        },\r\n                                        ...{series: dataset.data.sort(sortToLowest)}}}\r\n                                    {...props}\r\n                                />\r\n                            }\r\n                        </div>\r\n                    </div>\r\n                    <ChartTitle title={\"Production d'électricité par source\"}/>\r\n                    <ChartSources sourcesName={\"OWID\"} sourcesLink={\"https://ourworldindata.org/grapher/electricity-prod-source-stacked\"}/>\r\n                </>\r\n            }\r\n        </>\r\n    )\r\n}\r\n\r\nexport default ElectricityProductionBySource;"],"names":["countries","require","convertLabels","label","convertedLabel","replace","charAt","toUpperCase","slice","country","year","chartCountries","Array","from","Set","data","datum","Code","select","map","unshift","countryData","chartData","filter","parseInt","Year","sort","a","b","forEach","countryDatum","Object","keys","key","includes","push","name","y","years","reverse","find","isNaN","parseFloat","seriesLabel","Highcharts","highcharts3d","props","React","dataset","setDataset","setYear","setCountry","chart","setChart","width","useWindowDimensions","getElectricityProductionBySource","console","log","ChartLoader","className","FormControl","sx","minWidth","maxWidth","marginRight","Autocomplete","disableClearable","disablePortal","id","options","color","value","onChange","handleCountryChange","renderInput","params","TextField","marginLeft","handleYearChange","ChartTypes","chartTypes","highcharts","getOptions","series","type","xAxis","categories","tickmarkPlacement","title","enabled","yAxis","text","sortToLowest","ChartTitle","ChartSources","sourcesName","sourcesLink"],"sourceRoot":""}