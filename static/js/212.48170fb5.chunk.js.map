{"version":3,"file":"static/js/212.48170fb5.chunk.js","mappings":"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","sources":["data/adapter/getElectricityProductionBySource.js","components/charts/ElectricityProductionBySource.js"],"sourcesContent":["import data from \"../dataset/electricity/electricity-production-by-source.json\";\r\nimport defaultOwidAdapter from \"./owid/defaultOwidAdapter\";\r\n\r\nconst getElectricityProductionBySource = (country, year) => {\r\n    return defaultOwidAdapter(data, country, year, (key) => key.includes('TWh'))\r\n}\r\n\r\nexport default getElectricityProductionBySource","import React  from 'react';\r\nimport Highcharts from 'highcharts';\r\nimport HighchartsReact from 'highcharts-react-official';\r\nimport highcharts3d from \"highcharts/highcharts-3d\";\r\nimport FormControl from '@mui/material/FormControl';\r\nimport {Autocomplete, TextField} from \"@mui/material\";\r\nimport useWindowDimensions from \"../../utils/useWindowDimensions\";\r\nimport {getOptions} from \"../../options/chartOptions\";\r\nimport seriesLabel from 'highcharts/modules/series-label';\r\nimport ChartLoader from \"../ChartLoader\";\r\nimport handleCountryChange from \"../../utils/handleCountryChange\";\r\nimport handleYearChange from \"../../utils/handleYearChange\";\r\nimport ChartTypes from \"../ChartTypes\";\r\nimport sortToLowest from \"../../utils/sortToLowest\";\r\nimport ChartTitle from \"../ChartTitle\";\r\nimport ChartSources from \"../ChartSources\";\r\nimport getElectricityProductionBySource from \"../../data/adapter/getElectricityProductionBySource\";\r\nimport getCountryLabel from \"../../utils/getCountryLabel\";\r\n\r\nseriesLabel(Highcharts);\r\nhighcharts3d(Highcharts);\r\n\r\nconst ElectricityProductionBySource = (props) => {\r\n    const [dataset, setDataset] = React.useState(null)\r\n    const [year, setYear] = React.useState('2020')\r\n    const [country, setCountry] = React.useState('World')\r\n    const [chart, setChart] = React.useState('area')\r\n    const {width} = useWindowDimensions();\r\n\r\n    React.useLayoutEffect(() => {\r\n        setDataset(getElectricityProductionBySource(country, year))\r\n    }, [])\r\n\r\n    React.useEffect(() => {\r\n        setDataset(getElectricityProductionBySource(country, (chart !== 'pie' ? null : year)))\r\n    }, [year, country, chart])\r\n\r\n    return (\r\n        <>\r\n            {dataset === null &&\r\n                <ChartLoader/>\r\n            }\r\n\r\n            {dataset !== null &&\r\n                <>\r\n                    <div className=\"row pb-4 pt-2 justify-content-between\">\r\n                        <div className=\"col-auto chart-related-settings\">\r\n                            <FormControl sx={{ minWidth: 200, maxWidth: 400, marginRight: 1, marginBottom: 1 }}>\r\n                                <Autocomplete\r\n                                    disableClearable\r\n                                    disablePortal\r\n                                    id=\"country-box\"\r\n                                    options={dataset.countries.sort((a, b) => -getCountryLabel(b).charAt(0).localeCompare(getCountryLabel(a).charAt(0)))}\r\n                                    color={\"primary\"}\r\n                                    value={country}\r\n                                    getOptionLabel={(option) => getCountryLabel(option)}\r\n                                    onChange={(event, value) => handleCountryChange(value, setCountry)}\r\n                                    sx={{ width: 250 }}\r\n                                    renderInput={(params) => <TextField {...params} label={\"Pays\"} />}\r\n                                />\r\n                            </FormControl>\r\n                            {chart !== 'area' &&\r\n                                <FormControl sx={{ minWidth: 200, maxWidth: 400, marginLeft: {\r\n                                    xs: 0,\r\n                                    md: 1\r\n                                } }}>\r\n                                    <Autocomplete\r\n                                        disableClearable\r\n                                        disablePortal\r\n                                        id=\"year-box\"\r\n                                        options={dataset.years}\r\n                                        value={year}\r\n                                        getOptionLabel={(option) => option.toString()}\r\n                                        onChange={(value) => handleYearChange(value, setYear)}\r\n                                        sx={{ width: 250 }}\r\n                                        renderInput={(params) => <TextField {...params} label={\"Année\"} />}\r\n                                    />\r\n                                </FormControl>\r\n                            }\r\n                        </div>\r\n                        <div className=\"col-auto\">\r\n                            <ChartTypes chart={chart} setChart={setChart} chartTypes={['pie', 'area']}/>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"row\">\r\n                        <div className=\"col\">\r\n                            {chart === 'pie' &&\r\n                                <HighchartsReact\r\n                                    highcharts={Highcharts}\r\n                                    options={{...(getOptions(chart, width)), ...{series: [{\r\n                                                type: chart,\r\n                                                data: dataset.data\r\n                                            }]}}}\r\n                                    {...props}\r\n                                />\r\n                            }\r\n                            {chart === 'area' &&\r\n                                <HighchartsReact\r\n                                    highcharts={Highcharts}\r\n                                    options={{\r\n                                        ...(getOptions(chart, width)),\r\n                                        ...{\r\n                                            xAxis: {\r\n                                                categories: [...dataset.years],\r\n                                                tickmarkPlacement: 'on',\r\n                                                title: {\r\n                                                    enabled: false\r\n                                                }\r\n                                            },\r\n                                            yAxis: {\r\n                                                title: {\r\n                                                    text: 'Twh'\r\n                                                },\r\n                                            },\r\n                                        },\r\n                                        ...{series: dataset.data.sort(sortToLowest)}}}\r\n                                    {...props}\r\n                                />\r\n                            }\r\n                        </div>\r\n                    </div>\r\n                    <ChartTitle title={\"Production d'électricité par source\"}/>\r\n                    <ChartSources sourcesName={\"OWID\"} sourcesLink={\"https://ourworldindata.org/grapher/electricity-prod-source-stacked\"}/>\r\n                </>\r\n            }\r\n        </>\r\n    )\r\n}\r\n\r\nexport default ElectricityProductionBySource;"],"names":["country","year","defaultOwidAdapter","data","key","includes","seriesLabel","Highcharts","highcharts3d","props","React","dataset","setDataset","setYear","setCountry","chart","setChart","width","useWindowDimensions","getElectricityProductionBySource","ChartLoader","className","FormControl","sx","minWidth","maxWidth","marginRight","marginBottom","Autocomplete","disableClearable","disablePortal","id","options","countries","sort","a","b","getCountryLabel","charAt","localeCompare","color","value","getOptionLabel","option","onChange","event","handleCountryChange","renderInput","params","TextField","label","marginLeft","xs","md","years","toString","handleYearChange","ChartTypes","chartTypes","highcharts","getOptions","series","type","xAxis","categories","tickmarkPlacement","title","enabled","yAxis","text","sortToLowest","ChartTitle","ChartSources","sourcesName","sourcesLink"],"sourceRoot":""}